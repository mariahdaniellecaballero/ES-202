{
  "hash": "76a73a4971caa33dd9d1ad540ba58d1e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"[Assess] Group Projects\"\ndate: \"November 21, 2025\"\nformat: \n  revealjs:\n    theme:\n      - default\n    css: custom.scss\n    transition: fade\n    slide-number: true\n    incremental: false \n    chalkboard: true\n    center: true\nexecute:\n  freeze: auto\n---\n\n\n\n## Overview\n- Centering Activity\n- Spatial data in R (mini-lecture)\n- Paired Work\n- Few Logistics\n\n## Centering Activity {.smaller}\n- Write something you're most proud of this semester on the white board\n  - Can be non-academic, in fact I suggest it!\n- Take a few minutes to read how far we've come!\n\n## Spatial Data in R {.smaller}\n- Spatial Operations\n- Working with Redlining Data\n\n## Loading Packages + Data {.smaller}\n- Load sf, tidyverse, mapview, tigris, and wesanderson packages \n- Dataset from NYC Open Data Portal on [Rat Inspections](https://data.cityofnewyork.us/Health/Rodent-Inspection/p937-wjvj/about_data)\n  - [Neighborhood Tabulation Areas](https://data.cityofnewyork.us/Health/Rodent-Inspection/p937-wjvj/about_data) Dataset (NTAs) from NYC Open Data Portal\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(tigris)\nlibrary(wesanderson)\n\nbrkln_rats <- read_sf(\"data/brooklyn_rats/rats.shp\")\nnta <- read_sf(\"data/nta/nta.shp\") |>\n  filter(BoroName == \"Brooklyn\")\n```\n:::\n\n\n\n## Quick look at our data {.smaller}\n- Here's all of the Rat Activity Sightings since my friends moved into Brooklyn (08/01/2025). \n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = nta) +\n  geom_sf(data = brkln_rats)\n```\n\n::: {.cell-output-display}\n![](22-assess_group_proj_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n\n\n## Spatial Operations {.smaller}\n- Sometimes, we want to select data based on its spatial attributes, rather than numeric/character attributes. \n- Spatial operations are lovely for this reason! \n\n::: {.cell}\n\n```{.r .cell-code}\nbrkln_rats\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 5169 features and 5 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -74.03695 ymin: 40.5721 xmax: -73.85655 ymax: 40.73692\nGeodetic CRS:  WGS 84\n# A tibble: 5,169 × 6\n    jb_____ inspctn_t  inspctn_d        jb_prgr result             geometry\n      <dbl> <chr>      <chr>              <dbl> <chr>           <POINT [°]>\n 1 14137326 Initial    08/01/2025 08:1…       1 Rat A…  (-73.9383 40.68687)\n 2 14137670 Initial    08/01/2025 08:5…       1 Rat A… (-73.92992 40.70549)\n 3 14137481 Compliance 08/01/2025 09:0…       4 Rat A… (-73.94362 40.68193)\n 4 14137661 Compliance 08/01/2025 09:0…       2 Rat A… (-73.94177 40.70747)\n 5 14137115 Initial    08/01/2025 09:1…       1 Rat A…  (-73.94126 40.6991)\n 6 14137116 Initial    08/01/2025 09:1…       1 Rat A… (-73.94124 40.69902)\n 7 14137484 Initial    08/01/2025 09:2…       1 Rat A… (-73.94307 40.68184)\n 8 14137747 Initial    08/01/2025 09:2…       1 Rat A… (-73.96871 40.64889)\n 9 14137485 Compliance 08/01/2025 09:2…      14 Rat A…  (-73.9429 40.68186)\n10 14137662 Compliance 08/01/2025 09:3…       2 Rat A… (-73.94399 40.70872)\n# ℹ 5,159 more rows\n```\n\n\n:::\n:::\n\n\n## Spatial Subsetting\n  - Perhaps we're interested in selecting only the activity in their neighborhood? \n  - Spatial Subsetting allows you to select \n\n::: {.cell}\n\n```{.r .cell-code}\nplgw <- nta |>\n  filter(NTAName == \"Prospect Lefferts Gardens-Wingate\")\n\nplgw_rats <- brkln_rats[plgw, ]\n```\n:::\n\n\n## My Friends' Rats\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = plgw) +\n  geom_sf(data = plgw_rats)\n```\n\n::: {.cell-output-display}\n![](22-assess_group_proj_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Working with Redlining Data\n- Downloaded spatial data as a GEOJson file for Nashville, TN from the [Mapping Inequality](https://dsl.richmond.edu/panorama/redlining/data/TN-Nashville#cityData) website.\n- geoJSON is a text-based spatial files that is easy to use and lightweight. \n- We can also use the `rm()` function to remove objects in our environment we no longer need. \n\n::: {.cell}\n\n```{.r .cell-code}\nnash_holc <- st_read(\"data/nashville_redlining.json\")\n\nrm(brkln_rats, nta, plgw, plgw_rats)\n```\n:::\n\n\n## Nashville HOLC map \n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = nash_holc) +\n  geom_sf(aes(fill = grade)) +\n  scale_fill_manual(values = unique(nash_holc$fill))\n```\n\n::: {.cell-output-display}\n![](22-assess_group_proj_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n## Crosswalked Census Tracts \n- There's also data available from the mapping inequality project that \"crosswalks\" the original shapefile to census 2010 and 2020 census tracts. \n- This is useful because you can much more easily join your CT data and visualize both sociodemographics and historic disinvestment. \n\n::: {.cell}\n\n```{.r .cell-code}\nnash_ct <- st_read(\"data/2020_redline_tracts.geojson\") |>\n  filter(city == \"Nashville\")\n```\n:::\n\n\n## HOLC CTs \n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = nash_ct) +\n  geom_sf(aes(fill = grade)) +\n  scale_fill_manual(values = unique(nash_ct$fill))\n```\n\n::: {.cell-output-display}\n![](22-assess_group_proj_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n## Adding a Continuous EJ Variable\n\n::: {.cell}\n\n```{.r .cell-code}\nnash_ej_ct <- read_sf(\"data/nash_ej/nash_ej.shp\")\n```\n:::\n\n\n## Preparing data for Mapping {.smaller}\n- I was inspired by this [NYTimes Data piece](https://www.nytimes.com/interactive/2020/08/24/climate/racism-redlining-cities-global-warming.html)\n\n::: {.cell}\n\n```{.r .cell-code}\n# turning off this pesky option\nsf_use_s2(FALSE)\n\n# ensure projection is the same\nnash_holc <- nash_holc |> st_transform(st_crs(nash_ej_ct))\n\n# select cts in HOLC area\nholc_ej <- nash_ej_ct[nash_holc, ]\n\n# filter HOLC regions for D grade\nnash_holc_d <- nash_holc |>\n  filter(grade == \"D\")\n```\n:::\n\n\n## Map!{.smaller}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = holc_ej, aes(fill = lfxppct)) +\n  scale_fill_gradientn(\n    colors = wes_palette(\"Zissou1\", 100, type = \"continuous\"),\n    name = \"% Low Life Expectancy\"\n  ) +\n  geom_sf(\n    data = nash_holc_d,\n    color = \"black\",\n    fill = NA,\n    linewidth = 0.8\n  ) +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](22-assess_group_proj_files/figure-revealjs/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n\n## Paired Work \n\n## Few Logistics\n- HEET joining us on Tuesday! \n  - One reading and one video to watch (pay attention to assigned chapters)\n  - Class will be **hybrid**, use link on Week 13 to join!\n- Reyna + Clara to prepare questions, Simmie to send thank you email. \n- Office Hours Wednesday, October 26, 2025 will be **virtual**",
    "supporting": [
      "22-assess_group_proj_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}