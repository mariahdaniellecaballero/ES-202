{
  "hash": "4df27532096daa8af5b2e8fa3475b071",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"[Assess] Global Stocktake Case Study\"\nsubtitle: \"üìç Sharm el Sheikh, Egypt\"\ndate: \"October 10, 2025\"\nformat: \n  revealjs:\n    theme:\n      - default\n    css: custom.scss\n    transition: fade\n    slide-number: true\n    incremental: false \n    chalkboard: true\n    center: true\nexecute:\n  freeze: auto\n---\n# Class Overview \n- Centering activity\n- Setting the stage\n- Paired coding\n\n## Centering Activity\n- Clara :-)\n\n## Setting the Stage\n- This week's focus is on formatting plots and Exploratory Data Analysis!\n- Using delegate data for COP1-COP29 (1995 to 2024)\n\n## Learning Outcomes\n- Apply thematic components to ggplot figures \n- Conduct Exploratory Data Analysis (EDA)\n- Understand data visualization options for different data relationships\n- Connect findings to theoretical understandings of cosmopolitan justice\n\n## Let's get Started\n- Find your pair\n- Open Posit\n\n## Loading packages {.smaller}\n- We'll need to install three new packages\n  - Run lines 1-3 in you *console* without the \"#\"\n  - Paste lines 4-8 in your *analysis.qmd* file\n  - Sometimes we might want to use packages currently under development, in which case we can use the `install_github()` function to install the `ggthemr` package.\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"scales\")\n# install.packages(\"RColorBrewer\")\n# install.packages(\"devtools\")\nlibrary(readr)\nlibrary(tidyverse)\nlibrary(scales)\nlibrary(RColorBrewer)\nlibrary(devtools)\n\n# devtools::install_github('Mikata-Project/ggthemr')\nlibrary(ggthemr)\n```\n:::\n\n\n## Loading data\n\n::: {.cell}\n\n```{.r .cell-code}\ncop_delegates <- read_csv(\"data/cop_delegates.csv\")\n```\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n## Take a look at data \n- There are 367,747 delegates in this dataset spanning from COP1 to COP29. \n- There are 21 variables: \n  - What information do we know about each delegate? \n  - Which variables are relevant for thinking about cosmopolitan justice and COP negotiations? \n\n## Subsetting the Data\n- Let's filter only for those involved in negotiations. \n  - This brings our df down to a meager 197,621 people over 30 years. \n\n::: {.cell}\n\n```{.r .cell-code}\nparties <- cop_delegates |>\n  filter(Group_Type == \"Parties\")\n```\n:::\n\n\n## Applying Thematic Components to Plots\n- We learned about geoms, aestheic mappings, plot statistics, positions, and facets last week! \n  - Let's talk scales and themes this week. \n\n## Scales {.smaller}\n- Scales are used to customize your aesthetic mappings. We most frequently will use scales to:\n  - change axis ticks \n  - add color palettes to your plots\n- Perhaps we were interested in how the number of party delegates has changed over time for AOSIS and non-AOSIS countries. \n\n::: {.cell}\n\n```{.r .cell-code}\nannual_parties <- parties |>\n  group_by(Year, AOSIS) |>\n  count()\n```\n:::\n\n\n## Scales(cont.) {.smaller}\n- Let's start with a basic line graph. \n  - How are the axes looking? \n\n::: {.cell}\n\n```{.r .cell-code}\nannual_parties |>\n  ggplot() +\n  geom_line(aes(x = Year, y = n, color = AOSIS))\n```\n\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Scales (Axes ticks/labels) {.smaller}\n- `scale_x_continuous()` allows you to change your x axis visuals. In this case, let's change the ticks, or \"breaks\". `seq()` creates a sequence of breaks if you provide it a start (1995), a finish (2025), and a pattern (by = 5). \n- `scale_y_continuous()` allows you to change your y axis visuals. Let's just add a comma to our delegate count `labels` using the `lable_comma()` function, so it's more clear to folks. \n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|4|5\"}\nannual_parties |>\n  ggplot() +\n  geom_line(aes(x = Year, y = n, color = AOSIS)) +\n  scale_x_continuous(breaks = seq(1995, 2025, by = 5)) +\n  scale_y_continuous(labels = label_comma())\n```\n:::\n\n\n## Axes scale outcome {.smaller}\nAh, much better! \n\n::: {.cell}\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n## Scales (colors) {.smaller}\n- `scale_color_manual()` allows us to define a custom color palette for categorical variables. \n  - values can be color names (red/blue) or hex codes, which you can find on websites like [coolors.co](#C3423F/#5BC0EB)!\n  - `name` will change the title of your legend\n  - `labels` will change the labels associated with your colors\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|6|7|8\"}\nannual_parties |>\n  ggplot() +\n  geom_line(aes(x = Year, y = n, color = AOSIS)) +\n  scale_x_continuous(breaks = seq(1995, 2025, by = 5)) +\n  scale_y_continuous(labels = label_comma()) +\n  scale_color_manual(\n    values = c(\"lightblue\", \"gray50\"),\n    name = \"Coalition\", labels = c(\"AOSIS\", \"Non-AOSIS\")\n  )\n```\n:::\n\n\n## Color scales outcome {.smaller}\nLooking good! \n\n::: {.cell}\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n## Lastly, Themes! {.smaller}\n- Themes control the non-data related aspects of a plot, such as labels, plot background, and legend position. \n  - `labs()` allows us to fix our y axis label. \n  - `theme_minimal()` changes the background of the plot (there are eight themes, see [here](https://ggplot2.tidyverse.org/reference/ggtheme.html) for more options!)\n  - `legend.position` allows us to move the legend from the right side to another position.\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|10|11|12\"}\nannual_parties |>\n  ggplot() +\n  geom_line(aes(x = Year, y = n, color = AOSIS)) +\n  scale_x_continuous(breaks = seq(1995, 2025, by = 5)) +\n  scale_y_continuous(labels = label_comma()) +\n  scale_color_manual(\n    values = c(\"lightblue\", \"gray70\"),\n    name = \"Party Coalition\", labels = c(\"AOSIS\", \"Non-AOSIS\")\n  ) +\n  labs(y = \"Number of Delegates\") +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n:::\n\n\n## EX_01 {.smaller}\nCreate a line chart for the percent of female negotiators between 1995 and 2024 for AOSIS and Non-AOSIS countries. Make sure to:\n\n - change the y scale to reflect a percentage\n  - hint: you can use `?label_percent()` for help\n - change your colors using the `scale_color_manual()` function\n - Change your y axis label\n - apply a different theme for your plot \n - and place the legend on top of your plot. \n\nI've provided the code for calculating a summary dataframe to get you started!\n\n## Exploratory Data Analysis {.smaller}\n- EDA is a process meant to better understand the kinds of variation in your data, and the type of covariation between variables that might be present. \n- EDA has no rules! The goal is to generate questions and explore your data to decide which graphs, models, or transformations to make. \n- There are lots of ways to explore your data, but let's learn three ways based on our variable types\n  - one continuous \n  - one categorical and one continuous\n  - two categorical\n\n## One Continuous Variable {.smaller}\n- Let's create a subset of our data for COP27 delegates, and count the number of delegates per country. \n- `geom_histogram()` gives us a great look at variation in a variable.\n\n::: {.cell}\n\n```{.r .cell-code}\ncop_27 <- parties |>\n  filter(Year == 2022) |>\n  count(AOSIS, Delegation)\n\n# plot\ncop_27 |>\n  ggplot() +\n  geom_histogram(aes(x = n))\n```\n:::\n\n\n## Histogram {.smaller}\n- Any important variation among delegate counts?\n\n::: {.cell}\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n\n## Histogram (bindwidth){.smaller}\n- We can also filter our dataset to look closer at the variation among smaller parties (n <100). \n- changing our `binwidth` allows us to see patterns among the majority of the data. \n\n::: {.cell}\n\n```{.r .cell-code}\ncop_27 |>\n  filter(n < 100) |>\n  ggplot() +\n  geom_histogram(aes(x = n), binwidth = 5)\n```\n\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n## Categorical and Continuous {.smaller}\n- Perhaps we wanted to understand the variation in party size between AOSIS and Non-AOSIS countries. \n- A boxplot is a great way to visualize continuous data with a categorical grouping! \n\n::: {.cell}\n\n```{.r .cell-code}\ndelegate_size <- parties |>\n  group_by(AOSIS, Delegation, Year) |>\n  tally()\n\ndelegate_size |>\n  ggplot() +\n  geom_boxplot(aes(x = AOSIS, y = n))\n```\n\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n\n## Two Categorical Variables {.smaller}\n- We can even do a quick exploration of the relationship between two categorical variables. \n- Suppose we were interested in the gender balance among AOSIS delegates\n  - we can use the `geom_count()` function to visualize the pattern between `Female` and `Delegation`\n   - note that \"female\" is a 1,0, so we need to change the data type from continuous to categorical using the `factor` function.\n\n::: {.cell}\n\n```{.r .cell-code}\ncop_27_aosis <- parties |>\n  filter(Year == 2022 & AOSIS == \"AOSIS\")\n\ncop_27_aosis |>\n  ggplot() +\n  geom_count(aes(x = factor(Female), y = Delegation))\n```\n:::\n\n\n## geom_count(){.smaller}\n\n::: {.cell}\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-17-1.png){width=960}\n:::\n:::\n\n\n## EX_02\n1. Using the `delegate_size` dataframe, filter out the outlying delegate numbers (i.e., n <1000) and visualize the variation in party size between AOSIS and Non-AOSIS countries using a boxplot. \n\n2. Using the results from the previous question, what sort of variation do you see in delegation size between AOSIS and non-AOSIS countries? \n  - Here's a [quick explanation](https://www.simplypsychology.org/boxplots.html) of boxplots in case it's been awhile. :-) \n\n\n## Data Visualization Options\nNow that we know how to format figures and explore variation in our data, we can think about how we might want to use our data to tell a story. \n\nHere are some great resources that I use often for inspiration. \n\n## From Data to Viz {.smaller}\n- [This is a great visual](https://drive.google.com/drive/folders/1aA_tWldPtM-wmbZvVYsOIF14Iec4bZmA?usp=drive_link) I often use when I'm thinking about the kinds of variables I have (or could create). \n![alt](images/poster-big.png)\n\n## Example Workflow \n- Say I'm interested in the number of delegates from universities or colleges in COP attendance, and their affiliated country, between 1995 and 2024. \n- If I filter the data and create a summarized dataframe, I'll have: \n  - one categorical and several numeric variables, one of which is ordered (aka, year). \n  - I think a grouped line plot could be good here. \n\n## Summarizing my data {.smaller}\n\n::: {.cell}\n\n```{.r .cell-code}\nhigher_ed <- cop_delegates |>\n  filter(str_detect(Affiliation, \"University\") | \n           str_detect(Affiliation, \"College\")) |> \n  group_by(Year, AOSIS) |>\n  count()\n```\n:::\n\n\n## R Graph Gallery {.smaller}\n- Once I choose a visual I'm interested in, I often use the website [r-graph-gallery.com](https://r-graph-gallery.com/) to find base code for kind of visual I'm interested in creating. \n- I'll select the \"line graph\" icon and find example code that creates a graphic I like. \n- Lastly, I can set a theme using the `ggethemr` package, let's use one called \"light\". \n  - You can see more palette options, [here](https://github.com/Mikata-Project/ggthemr)!\n\n::: {.cell}\n\n```{.r .cell-code}\nggthemr(\"solarized\")\n\nhigher_ed %>%\n  ggplot() +\n    geom_line(aes(x=Year, y=n, group=AOSIS, color=AOSIS))\n```\n:::\n\n\n## Not bad! {.smaller}\n\n::: {.cell}\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-20-1.png){width=960}\n:::\n:::\n\n\n\n## GGplot2 Cheatsheet {.smaller}\n- Lastly, once I have the base plot that I like, I'll use the [ggplot2 cheatsheet](https://rstudio.github.io/cheatsheets/html/data-visualization.html) to change small things that require code I haven't committed to memory, like axes labels, themes, etc. \n\n## Ta da! {.smaller}\n\n::: {.cell}\n\n```{.r .cell-code}\nhigher_ed |>\n  ggplot() +\n  geom_line(aes(x = Year, y = n, group = AOSIS, color = AOSIS),\n    linewidth = 1.5\n  ) +\n  labs(y = \"Number of Higher Ed Delegates\") +\n  scale_x_continuous(breaks = seq(1995, 2025, by = 5)) +\n  scale_y_continuous(\n    breaks = seq(0, 3000, by = 500),\n    labels = label_comma()\n  ) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](12-assess_COP_files/figure-revealjs/unnamed-chunk-21-1.png){width=960}\n:::\n:::\n\n\n## EX_03 + EX_04: \n  - See Posit! \n\n## Logistics \n- No class Tuesday, Happy Fall Break! \n- Dr. Caballero to lead centering on Friday\n- Logic model discussion next Friday",
    "supporting": [
      "12-assess_COP_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}