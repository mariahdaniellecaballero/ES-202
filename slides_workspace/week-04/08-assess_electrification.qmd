---
title: "[Assess] Rural Electrification Case Study"
subtitle: "üìç Edgecombe County, NC"
date: "September 26, 2025"
format: 
  revealjs:
    theme:
      - default
    css: custom.scss
    transition: fade
    slide-number: true
    incremental: false 
    chalkboard: true
    center: true
execute:
  freeze: auto
---

# Class Overview 
- Centering activity
- Setting the stage
- Zoom with Dr. Harrison
- Paired coding
- Group Debrief

# Centering Activity
Emily :-)

# Setting the Stage
- This week's focus is on coding style and data tidying
- Using data from the 1934 Rural Electrification Surveys provided by Dr. Conor Harrison

## Zoom with Dr. Harrison
- Join using [link](https://wellesley.zoom.us/j/94645455904?jst=2) in slides, or in week 04 of schedule. 
- Please mute yourself, so there's no echoing. 
- Feel free to ask questions (unmute then)!

## Learning Outcomes
- Understand coding style best practices
- Read accompanying data documentation and understand data summaries
- New skills in data tidying (i.e., lengthening and widening data)
- Connect findings to theoretical understandings of restorative justice

# Let's get Started
- Find your pair
- Open Posit

## Load Packages
```{r}
#| warning: false
#| message: false
#| echo: true
library(tidyverse)
library(readxl)
```

```{r}
# | eval: true
# | echo: false
survey <- read_excel("hw/case_studies/week-04-REA/data/Edgecombe_Data.xlsx")
```

# Coding Style Best Practices

## Naming Dataframes
- Naming conventions are a matter of preference, but readability is key.
  - R4ds suggests using lowercase letters, numbers, and underscores only. 
  - longer, more informative names are usually beter than short, confusing names.
```{r}
#| warning: false
#| message: false
#| echo: true
#| eval: false

# strive for
survey <- read_excel("data/survey_edgecombe.xlsx", 
  sheet = "Survey")
  
dictionary <- read_excel("data/survey_edgecombe.xlsx", 
    sheet = "Dictionary")

# avoid
EDGECOMBESRVY1934 <- read_excel("data/survey_edgecombe.xlsx", sheet = "Survey")

rm(EDGECOMBESRVY1934)
```


## Spaces
- Spaces should go on both sides of operators (-, +, >, etc.), except for ^.
- parentheses do not need spaces around them. 
- use a space after a comma, like English. :-) 

```{r}
#| warning: false
#| message: false
#| echo: true
#| eval: false

# strive for
mean(survey$HOGS)

# avoid
mean (survey$HOGS)
```

## Pipes
- Pipes should have a space before them and should be the last part of a line. 
- After a pipe, the next line should be indented two spaces (RStudio will automatically do this for you if you end your line with a pipe).  

```{r}
#| warning: false
#| message: false
#| echo: true
#| eval: false

# strive for
# strive for
survey |>
  filter(TENURE %in% c("Tenant")) |>
  count(WAFFLE_IRON)

# avoid
survey|>filter(TENURE %in% c("Tenant"))|>count(WAFFLE_IRON)
```

## ggplot
- ggplot functions just like pipes (i.e., each new layer should end with a +)
```{r}
#| warning: false
#| message: false
#| echo: true
#| eval: false
survey |>
  filter(RACE != "Unknown") |>
  ggplot(aes(KWH_YEAR, BILL_ANNUAL, color = RACE)) +
  geom_point() + 
  theme_minimal()
```


## Exercise One (collaborative)
Restyle the following code chunks (in the empty chunk below) and label what each line is doing, using "#". 
```{r}
#| warning: false
#| message: false
#| echo: true
#| eval: false

survey|>filter(TENURE%in%c("Owner","Tenant")& RACE %in%c("Black", "White"))|>group_by(TENURE,RACE)|>summarize(n=n(),mean_cows =mean(DAIRY_COW), mean_fruit=mean(FRUIT_ACRE))

survey|>filter(LINE %in%c(18,20,22,15)&RACE == "Black")|>group_by(TENURE)|>summarise(avg_hens=mean(HENS))
```


# Data Documentation

## Reading a Data Dictionary

## Reading Data Summaries 


## Exercise Two (collaborative)
Using the data dictionary and your summary results of the `survey` dataframe, choose five variables and tell me: 
1) the variable name
2) its definition 
3) its data type
4) whether there are any NA values (if it's numeric). 

# Lengthening and Widening Data {.smaller}


## Lengthening Data

## Widening Data

## Exercise Three (collaborative)

1. Compare average ratings for condition of the premise and interview quality by race and tenure. Remove data inputs with "Unknown" listed for race or tenure, and format the table nicely. 

2. Based on your findings, describe the role that rating the condition of the premise and interview quality played in determining the correction factor. 

3. Calculate the following for race and tenure. Remove data inputs with "Unknown" listed for race or tenure, and format the table nicely. 
    - Average uncorrected annual energy usage
    - Average corrected annual energy usage
    - Average bill
    - Average cost per Kwh


## Exercise Four (individual) {.smaller}
1. Based on your findings, describe the role that rating the condition of the premise and interview quality played in determining the correction factor. How did this state-sanctioned process shape the energy landscape in Edgecombe County that may have lasting effects today? 

2. Reflect on your findings and connect them to our readings on distributional justice AND restorative justice. 
